<%= grid(@users_grid) do |grid|
  grid.column name: "Name" do  |user|
    link_to user.name, home_student_show_path + '/' + user.id.to_s
  end
  grid.column name: "Section" do |user|
    text = if user.sections.any?
      user.sections.map(&:name).join ', '
    else
      "Assign"
    end
    link_to text, edit_user_path(user.id)
  end
  grid.column name: "Last Active" do  |user|
    if user.last_active_time
      status = user.active_today? ? 'success' : 'danger'
      [time_ago_in_words(user.last_active_time) + ' ago', {class: status}]
    else
      ["Never", {class: 'danger'}]
    end
  end
  grid.column name: "Published Posts" do  |user|
    if user.posts.published.count == 0
      [user.posts.published.count, {class: 'danger'}]
    else
      user.posts.published.count
    end
  end
  grid.column name: "Unpublished Posts" do  |user|
    if user.posts.unpublished.count == 0 &&
        user.posts.published.count == 0
      [user.posts.unpublished.count, {class: 'danger'}]
    else
      user.posts.unpublished.count
    end
  end
  grid.column name: "Total Posts" do  |user|
    user.posts.count
  end
end -%>
