<div class='post'>
  <div>
    <h1>
      <%= @post.title %>
    </h1>

    <p>
      <% unless @post.published %> <strong> Unpublished </strong> <% end %>
      <% unless @post.user.name == @user.name %>
        By <%= @post.user.name %>
      <% end %>
    </p>

    <% if @post.parent%>
    <p>
      <strong>Parent:</strong>
      <%= @post.parent %>
    </p>
    <% end %>

    <div class='post-images'>
      <% @post.images.each do |image| %>
        <figure>
          <%= link_to (image_tag image.file.url, class: 'post-image'),
            image.file.url %>
          <figcaption class='post-image-caption'>
            <p><%= image.caption %>
            <% if image.maker %> By <b><%= image.maker %></b><% end %></p>
            <p class='post-image-link'>
              <% if image.src %><%= link_to 'Image Source', image.src %> <%end%>
            </p>
          </figcaption>
        </figure>
      <% end %>
    </div>

    <p>
      <%= markdown @post.body %>
    </p>
  </div>
  <div class='post-links'>
    <hr>
    <%= link_to 'Edit', [:edit, @user, @post] %> |
    <%= link_to 'Back', [@user, :posts] %>
  </div>
</div>
